<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Role Management</title>

    <!-- BOOTSTRAP -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/css/sidebar-header.css}">
    <link rel="stylesheet" th:href="@{/css/admin-pages.css}">

</head>

<body>

<!-- SIDEBAR HEADER -->
<div th:replace="common/sidebar-header :: role-sidebar">
    
    <!-- PAGE CONTENT -->
    <div th:fragment="content">
        
        <div class="admin-container">

            <!-- PAGE HEADER -->
            <div class="page-header">
                <div>
                    <h1><i class="bi bi-shield-check"></i> Quản lý vai trò</h1>
                    <p class="page-subtitle">Quản lý vai trò và quyền hạn hệ thống</p>
                </div>
                <a href="/admin/roles/create" class="btn btn-create">
                    <i class="bi bi-plus-circle"></i> Tạo vai trò
                </a>
            </div>

            <!-- SEARCH SECTION -->
            <div class="search-section">
                <form method="get" th:action="@{/admin/roles}" class="search-form">
                    <div class="search-input-group">
                        <i class="bi bi-search"></i>
                        <input type="text"
                               name="keyword"
                               th:value="${keyword}"
                               placeholder="Tìm kiếm tên vai trò..."
                               class="search-input">
                    </div>
                    <button type="submit" class="btn btn-search">
                        <i class="bi bi-search"></i> Tìm kiếm
                    </button>
                </form>
            </div>

            <!-- TABLE SECTION -->
            <div class="table-section">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th class="col-id">ID</th>
                            <th class="col-name">Tên vai trò</th>
                            <th class="col-note">Mô tả</th>
                            <th class="col-actions">Hành động</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="r : ${roles}" class="role-row">
                            <td class="col-id">
                                <span class="badge-id" th:text="${r.roleId}"></span>
                            </td>
                            <td class="col-name">
                                <strong th:text="${r.roleName}"></strong>
                            </td>
                            <td class="col-note" th:text="${r.note}"></td>
                            <td class="col-actions">
                                <a th:href="@{/admin/roles/edit/{id}(id=${r.roleId})}" 
                                   class="btn-action edit" 
                                   title="Chỉnh sửa">
                                    <i class="bi bi-pencil"></i> Sửa
                                </a>
                                <a th:href="@{/admin/roles/delete/{id}(id=${r.roleId})}" 
                                   class="btn-action delete"
                                   onclick="return confirm('Bạn có chắc chắn muốn xóa vai trò này?');"
                                   title="Xóa">
                                    <i class="bi bi-trash"></i> Xóa
                                </a>
                            </td>
                        </tr>
                        <tr th:if="${roles.size() == 0}" class="empty-row">
                            <td colspan="4">
                                <div class="empty-state">
                                    <i class="bi bi-inbox"></i>
                                    <p>Không tìm thấy vai trò nào</p>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- PAGINATION -->
            <nav th:if="${totalPages > 1}" class="pagination-section">
                <ul class="pagination-list">

                    <li class="pagination-item" th:classappend="${currentPage == 0} ? 'disabled'">
                        <a th:href="@{'/admin/roles?page=' + (${currentPage} - 1) + '&keyword=' + ${keyword}}"
                           class="pagination-link">
                            <i class="bi bi-chevron-left"></i> Trước
                        </a>
                    </li>

                    <li class="pagination-item"
                        th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
                        th:classappend="${i == currentPage} ? 'active'">
                        <a class="pagination-link"
                           th:text="${i + 1}"
                           th:href="@{'/admin/roles?page=' + ${i} + '&keyword=' + ${keyword}}">
                        </a>
                    </li>

                    <li class="pagination-item" th:classappend="${currentPage == totalPages - 1} ? 'disabled'">
                        <a th:href="@{'/admin/roles?page=' + (${currentPage} + 1) + '&keyword=' + ${keyword}}"
                           class="pagination-link">
                            Tiếp <i class="bi bi-chevron-right"></i>
                        </a>
                    </li>

                </ul>
            </nav>

        </div>

    </div>

</div>

</body>
</html>
