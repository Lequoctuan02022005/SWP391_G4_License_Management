<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Tool Upload Management</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f5f7fa;
        }
        .sidebar {
            width: 240px;
        }
    </style>
</head>

<body>

<div class="d-flex">

    <nav class="sidebar bg-dark text-white vh-100 p-3">
        <h4 class="text-white mb-4"
            th:text="'Hello ' + ${account.fullName}">
            Hello Moderator
        </h4>

        <ul class="nav flex-column">
            <li class="nav-item mb-2">
                <a th:href="@{/admin/dashboard}"
                   class="nav-link text-white">Dashboard</a>
            </li>

            <li class="nav-item mb-2">
                <a th:href="@{/admin/accounts}"
                   class="nav-link text-white">Quản lý Users</a>
            </li>

            <li class="nav-item mb-2">

                <a th:href="@{/tools/mod/uploads}"
                   class="nav-link text-white fw-bold">
                    Quản lý Tools
                </a>
            </li>

            <li class="nav-item mb-2">
                <a href="#" class="nav-link text-white">Quản lý Orders</a>
            </li>

            <li class="nav-item mt-4">
                <a th:href="@{/logout}" class="nav-link text-danger">Logout</a>
            </li>
        </ul>
    </nav>

    <!-- ===== MAIN CONTENT ===== -->
    <main class="flex-grow-1 p-4">

        <h3 class="fw-bold mb-3">Tool Upload Management</h3>

        <!-- SEARCH + FILTER -->
        <div class="card shadow-sm mb-4">
            <div class="card-body">
                <form method="get" class="row g-3">

                    <div class="col-md-4">
                        <input type="text"
                               name="keyword"
                               class="form-control"
                               placeholder="Search by tool name..."
                               th:value="${keyword}">
                    </div>

                    <div class="col-md-3">
                        <select name="status" class="form-select">
                            <option value=""
                                    th:selected="${status == null or status == ''}">
                                All Status
                            </option>
                            <option value="PENDING" th:selected="${status == 'PENDING'}">Pending</option>
                            <option value="APPROVED" th:selected="${status == 'APPROVED'}">Approved</option>
                            <option value="REJECTED" th:selected="${status == 'REJECTED'}">Rejected</option>
                            <option value="PUBLISHED" th:selected="${status == 'PUBLISHED'}">Published</option>
                        </select>
                    </div>

                    <div class="col-md-2">
                        <button class="btn btn-dark w-100">Search</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- TABLE -->
        <div class="card shadow-sm">
            <div class="card-body p-0">
                <table class="table table-hover mb-0 text-center">
                    <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Tool Name</th>
                        <th>Seller</th>
                        <th>Created At</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                    </thead>

                    <tbody>
                    <tr th:each="t : ${tools.content}">
                        <td th:text="${t.toolId}"></td>
                        <td th:text="${t.toolName}"></td>
                        <td th:text="${t.seller.fullName}"></td>
                        <td th:text="${#temporals.format(t.createdAt,'yyyy-MM-dd HH:mm')}"></td>

                        <td>
                            <span class="badge bg-warning text-dark"
                                  th:if="${t.status.name() == 'PENDING'}">Pending</span>
                            <span class="badge bg-success"
                                  th:if="${t.status.name() == 'APPROVED'}">Approved</span>
                            <span class="badge bg-danger"
                                  th:if="${t.status.name() == 'REJECTED'}">Rejected</span>
                            <span class="badge bg-primary"
                                  th:if="${t.status.name() == 'PUBLISHED'}">Published</span>
                        </td>

                        <td>
                            <a class="btn btn-sm btn-outline-primary"
                               th:href="@{/tools/mod/uploads/{id}(id=${t.toolId})}">
                                Review
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- PAGINATION -->
        <div class="mt-3 d-flex justify-content-between align-items-center">
            <span class="text-muted">
                Page <b th:text="${tools.number + 1}"></b>
                of <b th:text="${tools.totalPages}"></b>
            </span>

            <div>
                <a th:if="${tools.hasPrevious()}"
                   class="btn btn-outline-secondary btn-sm"
                   th:href="@{/tools/mod/uploads(page=${tools.number - 1}, keyword=${keyword}, status=${status})}">
                    Previous
                </a>

                <a th:if="${tools.hasNext()}"
                   class="btn btn-outline-secondary btn-sm"
                   th:href="@{/tools/mod/uploads(page=${tools.number + 1}, keyword=${keyword}, status=${status})}">
                    Next
                </a>
            </div>
        </div>

    </main>
</div>

</body>
</html>
