<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Renew History</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0; background:#f6f7fb; color:#111; }
        .container { max-width: 980px; margin:24px auto; padding:0 16px; }
        .card { background:#fff; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,.06); padding:16px; }
        h1 { margin:0 0 10px; font-size:22px; }
        .btn { display:inline-block; padding:10px 14px; border-radius:10px; text-decoration:none; font-weight:800; }
        .btn-ghost { background:#eef2ff; color:#1f3a8a; }
        table { width:100%; border-collapse:collapse; margin-top:12px; }
        th, td { text-align:left; padding:12px 10px; border-bottom:1px solid #edf0f5; vertical-align:top; }
        th { font-size:12px; color:#555; text-transform:uppercase; letter-spacing:.04em; }
        .muted { color:#666; font-size:13px; }
        .empty { padding:18px; border:1px dashed #d7d9e0; border-radius:12px; background:#fbfcff; margin-top:14px; }
    </style>
</head>
<body>
<div class="container">
    <div class="card">
        <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;">
            <h1>Renew History</h1>
            <a class="btn btn-ghost" th:href="@{/customer/license-accounts/{id}(id=${licenseAccountId})}">‚Üê Back</a>
        </div>

        <div th:if="${history == null or #lists.isEmpty(history)}" class="empty">
            <b>No renewal history.</b>
            <div class="muted">When renewal is successful, the system will log here.</div>
        </div>

        <div th:if="${history != null and !#lists.isEmpty(history)}">
            <table>
                <thead>
                <tr>
                    <th>Renew date</th>
                    <th>New end date</th>
                    <th>Amount</th>
                    <th>Transaction</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="h : ${history}">
                    <td th:text="${h.renewDate != null ? #temporals.format(h.renewDate,'dd/MM/yyyy HH:mm') : '(N/A)'}">--</td>
                    <td th:text="${h.newEndDate != null ? #temporals.format(h.newEndDate,'dd/MM/yyyy HH:mm') : '(N/A)'}">--</td>
                    <td>
                        <b th:text="${h.amountPaid != null ? (#numbers.formatDecimal(h.amountPaid,0,'COMMA',0,'POINT') + ' VND') : '(N/A)'}">0</b>
                    </td>
                    <td>
            <span th:if="${h.transaction != null}">
              TxnId: <b th:text="${h.transaction.transactionId}">0</b>
            </span>
                        <span th:if="${h.transaction == null}" class="muted">N/A</span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

    </div>
</div>
</body>
</html>