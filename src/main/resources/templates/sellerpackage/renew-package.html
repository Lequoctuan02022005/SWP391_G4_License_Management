<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Seller Package</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/renew-package.css}">
    <link rel="stylesheet" th:href="@{/css/home.css}">
</head>

<body>

<!-- ================= SELLER (SIDEBAR) ================= -->
<th:block th:if="${isSellerRole}">
    <div th:replace="common/sidebar-header :: role-sidebar">
        <th:block th:fragment="content">
            <div class="page-wrapper">
                <div class="premium-container">

                    <h2 class="fw-bold text-center title">Renew Seller Package</h2>
                    <p class="text-center subtitle">Choose a package to continue selling</p>

                    <!-- ===== ALERTS ===== -->
                    <div class="alert-premium" th:if="${expired}">
                        Your seller subscription has expired. Please renew to continue.
                    </div>

                    <div class="alert-warning-premium" th:if="${#lists.isEmpty(packages)}">
                        No seller packages are available at the moment.
                    </div>

                    <!-- ===== FORM ===== -->
                    <form th:action="@{/seller/renew}" method="post" id="packageForm">

                        <div class="row g-4">
                            <div class="col-md-4" th:each="pkg : ${packages}">
                                <div class="package-card"
                                     th:attr="data-id=${pkg.id}"
                                     onclick="selectPackage(this)">

                                    <div>
                                        <div class="package-header">
                                            <h4 th:text="${pkg.packageName}"></h4>
                                            <div class="duration"
                                                 th:text="|Duration: ${pkg.durationInMonths} months|"></div>
                                        </div>

                                        <div class="price"
                                             th:text="${#numbers.formatDecimal(pkg.price,0,'COMMA',0,'POINT')} + ' VND'">
                                        </div>

                                        <div class="desc"
                                             th:if="${pkg.description != null}"
                                             th:text="${pkg.description}">
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <input type="hidden" name="packageId" id="selectedPackageId">

                        <div class="action-area">
                            <button type="submit" class="btn-premium" id="submitBtn">
                                Renew & Pay
                            </button>

                            <div class="mt-3">
                                <a href="/dashboard" class="btn-back">← Back</a>
                            </div>
                        </div>

                    </form>

                </div>
            </div>
        </th:block>
    </div>
</th:block>

<!-- ================= CUSTOMER (HEADER) ================= -->
<th:block th:if="${!isSellerRole}">

    <div th:replace="common/header :: header"></div>

    <div class="page-wrapper">
        <div class="premium-container">

            <h2 class="fw-bold text-center title">Register as Seller</h2>
            <p class="text-center subtitle">Choose a seller package to register</p>

            <!-- ===== ALERTS ===== -->
            <div class="alert-premium">
                You are not a seller yet. Please choose a package to register.
            </div>

            <div class="alert-warning-premium" th:if="${#lists.isEmpty(packages)}">
                No seller packages are available at the moment.
            </div>

            <!-- ===== FORM ===== -->
            <form th:action="@{/seller/register}" method="post" id="packageForm">

                <div class="row g-4">
                    <div class="col-md-4" th:each="pkg : ${packages}">
                        <div class="package-card"
                             th:attr="data-id=${pkg.id}"
                             onclick="selectPackage(this)">

                            <div>
                                <div class="package-header">
                                    <h4 th:text="${pkg.packageName}"></h4>
                                    <div class="duration"
                                         th:text="|Duration: ${pkg.durationInMonths} months|"></div>
                                </div>

                                <div class="price"
                                     th:text="${#numbers.formatDecimal(pkg.price,0,'COMMA',0,'POINT')} + ' VND'">
                                </div>

                                <div class="desc"
                                     th:if="${pkg.description != null}"
                                     th:text="${pkg.description}">
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <input type="hidden" name="packageId" id="selectedPackageId">

                <div class="action-area">
                    <button type="submit" class="btn-premium" id="submitBtn">
                        Register & Pay
                    </button>

                    <div class="mt-3">
                        <a href="/home" class="btn-back">← Back</a>
                    </div>
                </div>

            </form>

        </div>
    </div>

</th:block>

<!-- ================= JS ================= -->
<script>
    function selectPackage(card) {

        document.querySelectorAll('.package-card')
            .forEach(c => c.classList.remove('selected'));

        card.classList.add('selected');

        document.getElementById('selectedPackageId').value =
            card.getAttribute('data-id');

        document.getElementById('submitBtn').style.display = 'inline-block';
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
