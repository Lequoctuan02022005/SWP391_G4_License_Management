<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Nâng cấp tài khoản Seller</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!-- Premium CSS -->
    <link rel="stylesheet" th:href="@{/css/renew-package.css}">
</head>

<body>

<div th:replace="common/header "></div>

<div class="page-wrapper">

    <div class="premium-container">

        <h2 class="fw-bold text-center mb-2 title">Nâng cấp tài khoản Seller</h2>
        <p class="text-center subtitle">Chọn gói phù hợp để tiếp tục sử dụng tính năng bán tool</p>

        <div class="alert-premium" th:if="${isNewSeller}">
            <i class="bi bi-exclamation-triangle"></i>
            <span>Xin mời bạn chọn gói để trở thành Seller.</span>
        </div>

        <div class="alert-premium"
             th:if="${expired} or !${isNewSeller}">
            <i class="bi bi-exclamation-triangle"></i>
            <span>Gói Seller của bạn đã hết hạn. Vui lòng gia hạn để tiếp tục bán tool.</span>
        </div>

        <!-- Không có gói Seller -->
        <div class="alert-warning-premium" th:if="${packages.size() == 0}">
            <i class="bi bi-info-circle"></i>
            Hiện chưa có gói Seller nào đang mở bán. Vui lòng liên hệ Admin.
        </div>

        <form method="post" th:action="@{/seller/renew}">
            <input type="hidden" name="packageId" id="selectedPackage">

            <div class="row gy-4 gx-4 justify-content-center">

                <!-- Card Package -->
                <div class="col-md-4" th:each="p : ${packages}">
                    <div class="package-card" th:data-id="${p.id}" onclick="selectPackage(this)">

                        <div class="package-header">
                            <h4 class="fw-bold" th:text="${p.packageName}"></h4>
                        </div>

                        <p class="duration">
                            <i class="bi bi-clock"></i>
                            <span th:text="${p.durationInMonths} + ' tháng'"></span>
                        </p>

                        <h4 class="price" th:text="${#numbers.formatDecimal(p.price, 0, 'POINT', 0, 'POINT')} + ' VND'"></h4>

                        <p class="desc" th:text="${p.description}"></p>
                    </div>
                </div>

            </div>

            <button id="submitBtn" class="btn-premium mt-4 w-100 fw-bold">
                Xác nhận mua gói
            </button>

            <a href="/home" class="btn-back w-100 mt-3">Quay lại trang chủ</a>
        </form>
    </div>
</div>

<!-- JS -->
<script>
    function selectPackage(card) {
        document.querySelectorAll(".package-card")
            .forEach(c => c.classList.remove("selected"));

        card.classList.add("selected");

        document.getElementById("selectedPackage").value = card.getAttribute("data-id");
        document.getElementById("submitBtn").style.display = "block";
    }
</script>

</body>
</html>
